(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[56],{3056:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return je}});var n,a=r(2791),s=r(8109),i=r(8617),o=r(6382),c=(0,o.oM)({name:"projectList/state",initialState:{view:"grid",query:{order:"asc",search:""},newProjectDialog:!1},reducers:{toggleView:function(e,t){e.view=t.payload},toggleSort:function(e,t){e.query.order=t.payload},setSearch:function(e,t){e.query.search=t.payload},toggleNewProjectDialog:function(e,t){e.newProjectDialog=t.payload}}}),u=c.actions,l=(u.toggleView,u.toggleSort,u.toggleNewProjectDialog),d=u.setSearch,f=c.reducer,p=r(6030),m=r(8573),h=r.n(m),g=r(3329),v=function(){var e=(0,p.I0)(),t=(0,a.useRef)(),r=((0,p.v9)((function(e){return e.projectList.state.view})),(0,p.v9)((function(e){return e.projectList.state.query})).sort,h()((function(t){e(d(t))}),500));return(0,g.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,g.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Transcripts"}),(0,g.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-1",children:[(0,g.jsx)(s.II,{ref:t,size:"sm",placeholder:"Search",prefix:(0,g.jsx)(i.O6C,{className:"text-lg"}),onChange:function(e){r(e.target.value)}}),(0,g.jsx)(s.zx,{size:"sm",variant:"twoTone",icon:(0,g.jsx)(i.HQD,{}),onClick:function(){e(l(!0))},children:"New Transcript"})]})]})},x=r(9439),j=r(4925),w=r(1413),b=r(2506),y=r(4999),Z=r(4942),N=r(4165),S=r(5861),C=r(1114);function D(e){return k.apply(this,arguments)}function k(){return(k=(0,S.Z)((0,N.Z)().mark((function e(t){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.Z.fetchData({url:"/project/list",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return M.apply(this,arguments)}function M(){return(M=(0,S.Z)((0,N.Z)().mark((function e(t){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.Z.fetchData({url:"/project/list/add",method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return L.apply(this,arguments)}function L(){return(L=(0,S.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.Z.fetchData({url:"/project/scrum-board/members",method:"post"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q,O=(0,o.hg)("projectList/getList",function(){var e=(0,S.Z)((0,N.Z)().mark((function e(t){var r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=(0,o.hg)("projectList/getMembers",(0,S.Z)((0,N.Z)().mark((function e(){var t,r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return t=e.sent,r=t.data.map((function(e){return{value:e.id,label:e.name,img:e.img}})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))),A=(0,o.hg)("projectList/putProject",function(){var e=(0,S.Z)((0,N.Z)().mark((function e(t){var r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=(0,o.oM)({name:"projectList/data",initialState:{loading:!1,projectList:[],allMembers:[]},reducers:{},extraReducers:(n={},(0,Z.Z)(n,O.fulfilled,(function(e,t){e.projectList=t.payload,e.loading=!1})),(0,Z.Z)(n,O.pending,(function(e){e.loading=!0})),(0,Z.Z)(n,z.fulfilled,(function(e,t){e.allMembers=t.payload})),(0,Z.Z)(n,A.fulfilled,(function(e,t){e.projectList=t.payload})),n)}).reducer,P=r(8121),_=r.n(P),J=r(2797),K=["children","data"],R=y.c.MultiValueLabel,U=s.PT.useUniqueId,V=function(e){var t=e.innerProps,r=e.label,n=e.data,a=e.isSelected;return(0,g.jsxs)("div",(0,w.Z)((0,w.Z)({className:"flex items-center justify-between p-2 ".concat(a?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600")},t),{},{children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(s.qE,{shape:"circle",size:20,src:n.img}),(0,g.jsx)("span",{className:"ml-2 rtl:mr-2",children:r})]}),a&&(0,g.jsx)(i.dZ6,{className:"text-emerald-500 text-xl"})]}))},H=function(e){var t=e.children,r=e.data,n=(0,j.Z)(e,K),a=r.img;return(0,g.jsx)(R,(0,w.Z)((0,w.Z)({},n),{},{children:(0,g.jsxs)("div",{className:"inline-flex items-center",children:[(0,g.jsx)(s.qE,{className:"mr-2 rtl:ml-2",shape:"circle",size:15,src:a}),t]})}))},F=J.Ry().shape({title:J.Z_().min(3,"Too Short!").required("Title required"),content:J.Z_().required("Title required"),assignees:J.IX().min(1,"Assignee required"),rememberMe:J.Xg()}),Y=function(){var e=(0,p.I0)(),t=(0,p.v9)((function(e){return e.projectList.data.allMembers})),r=U("project-"),n=(0,a.useState)({}),i=(0,x.Z)(n,2),o=i[0];i[1];(0,a.useEffect)((function(){e(z())}),[e]);return(0,g.jsx)(b.J9,{initialValues:{title:"",content:"",assignees:[]},validationSchema:F,onSubmit:function(t,n){n.resetForm;!function(t,n){n(!0);var a=t.title,s=t.content,i=t.assignees,c=o.totalTask,u=o.completedTask,d=_()(i).map((function(e){return e.name=e.label,e}));e(A({id:r,name:a,desc:s,totalTask:c,completedTask:u,progression:u/c*100||0,member:d})),e(l(!1))}(t,n.setSubmitting)},children:function(e){var r=e.touched,n=e.errors,a=e.values;e.resetForm;return(0,g.jsx)(b.l0,{children:(0,g.jsxs)(s.Yb,{children:[(0,g.jsx)(s.xJ,{label:"Student Name",invalid:n.title&&r.title,errorMessage:n.title,children:(0,g.jsx)(b.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter Student Name",component:s.II})}),(0,g.jsx)(s.xJ,{label:"Student No",invalid:n.title&&r.title,errorMessage:n.title,children:(0,g.jsx)(b.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter Student No",component:s.II})}),(0,g.jsx)(s.xJ,{label:"Award",invalid:n.assignees&&r.assignees,errorMessage:n.assignees,children:(0,g.jsx)(b.gN,{name:"assignees",children:function(e){var r=e.field,n=e.form;return(0,g.jsx)(s.Ph,{isMulti:!0,className:"min-w-[120px]",components:{Option:V,MultiValueLabel:H},field:r,form:n,options:t,value:a.assignees,onChange:function(e){n.setFieldValue(r.name,e)}})}})}),(0,g.jsx)(s.xJ,{label:"Transcript",invalid:n.content&&r.content,errorMessage:n.content,children:(0,g.jsx)(s.gq,{draggable:!0})}),(0,g.jsx)(s.zx,{block:!0,variant:"solid",type:"submit",children:"Submit"})]})})}})},W=function(){var e=(0,p.I0)(),t=(0,p.v9)((function(e){return e.projectList.state.newProjectDialog})),r=function(){e(l(!1))};return(0,g.jsxs)(s.Vq,{isOpen:t,onClose:r,onRequestClose:r,children:[(0,g.jsx)("h4",{children:"Add new transcript"}),(0,g.jsx)("div",{className:"mt-4",children:(0,g.jsx)(Y,{})})]})},$=r(1453),B=(0,r(7781).UY)({state:f,data:E}),Q=r(4483);function X(e){return G.apply(this,arguments)}function G(){return(G=(0,S.Z)((0,N.Z)().mark((function e(t){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.Z.fetchData({url:"/crm/customers",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=(0,S.Z)((0,N.Z)().mark((function e(t){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.Z.fetchData({url:"/crm/customers-statistic",method:"get",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,S.Z)((0,N.Z)().mark((function e(t){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.Z.fetchData({url:"/crm/customers",method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=(0,o.hg)("crmCustomers/data/getCustomerStatistic",(0,S.Z)((0,N.Z)().mark((function e(){var t;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),se=(0,o.hg)("crmCustomers/data/getCustomers",function(){var e=(0,S.Z)((0,N.Z)().mark((function e(t){var r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=((0,o.hg)("crmCustomers/data/putCustomer",function(){var e=(0,S.Z)((0,N.Z)().mark((function e(t){var r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,o.oM)({name:"crmCustomers/data",initialState:{loading:!1,customerList:[],statisticData:{},tableData:{total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},filterData:{status:""}},reducers:{setTableData:function(e,t){e.tableData=t.payload},setCustomerList:function(e,t){e.customerList=t.payload},setFilterData:function(e,t){e.filterData=t.payload}},extraReducers:(q={},(0,Z.Z)(q,se.fulfilled,(function(e,t){e.customerList=t.payload.data,e.tableData.total=t.payload.total,e.loading=!1})),(0,Z.Z)(q,se.pending,(function(e){e.loading=!0})),(0,Z.Z)(q,ae.pending,(function(e){e.statisticLoading=!0})),(0,Z.Z)(q,ae.fulfilled,(function(e,t){e.statisticData=t.payload,e.statisticLoading=!1})),q)})),oe=ie.actions,ce=oe.setTableData,ue=(oe.setCustomerList,oe.setFilterData,ie.reducer,(0,o.oM)({name:"crmCustomers/state",initialState:{drawerOpen:!1,selectedCustomer:{}},reducers:{setSelectedCustomer:function(e,t){e.selectedCustomer=t.payload},setDrawerOpen:function(e){e.drawerOpen=!0},setDrawerClose:function(e){e.drawerOpen=!1}}})),le=ue.actions,de=le.setSelectedCustomer,fe=le.setDrawerOpen,pe=(le.setDrawerClose,ue.reducer,r(3532)),me=r(1087);r(7892);(0,Q.fn)("projectList",B);var he={active:"bg-emerald-500",blocked:"bg-red-500"},ge=function(e){var t=e.row,r=(0,pe.Z)().textTheme,n=(0,p.I0)();return(0,g.jsx)("div",{className:"".concat(r," cursor-pointer select-none font-semibold"),onClick:function(){n(fe()),n(de(t))},children:"Edit"})},ve=function(e){var t=e.row,r=(0,pe.Z)().textTheme;return(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(s.qE,{size:28,shape:"circle",src:t.img}),(0,g.jsx)(me.rU,{className:"hover:".concat(r," ml-2 rtl:mr-2 font-semibold"),to:"/app/crm/customer-details?id=".concat(t.id),children:t.name})]})},xe=[{header:"Student  Name",accessorKey:"name",cell:function(e){var t=e.row.original;return(0,g.jsx)(ve,{row:t})}},{header:"Std Number",accessorKey:"stdno"},{header:"Award",accessorKey:"award"},{header:"Status",accessorKey:"status",cell:function(e){var t=e.row.original;return(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(s.Ct,{className:"verified"==he[t.status]?"active":"blocked"}),(0,g.jsx)("span",{className:"ml-2 rtl:mr-2 capitalize",children:t.status})]})}},{header:"Uploaded on",accessorKey:"lastOnline",cell:function(e){var t=e.row.original;return(0,g.jsx)("div",{className:"flex items-center",children:t.uploaded_on})}},{header:"",id:"action",cell:function(e){return(0,g.jsx)(ge,{row:e.row.original})}}],je=function(){var e=(0,p.I0)(),t=[],r=(0,p.v9)((function(e){return[]})),n=r.pageIndex,s=r.pageSize,i=r.sort,o=r.query,c=r.total,u=(0,a.useCallback)((function(){e(se({pageIndex:n,pageSize:s,sort:i,query:o,filterData:t}))}),[n,s,i,o,t,e]);(0,a.useEffect)((function(){u()}),[u,n,s,i,t]);var l=(0,a.useMemo)((function(){return{pageIndex:n,pageSize:s,sort:i,query:o,total:c}}),[n,s,i,o,c]);return(0,g.jsxs)($.W2,{className:"h-full",children:[(0,g.jsx)(v,{}),(0,g.jsx)($.wQ,{columns:xe,data:[{id:1,name:"MULINDE HAKIM",stdno:"2300039393",award:"MSTC",status:"verified",uploaded_on:"2023-03-04"},{id:2,name:"MUTYABA IBRAHIM",stdno:"2200039844",award:"MSIST",status:"not_verified",uploaded_on:"2023-03-04"},{id:3,name:"KYOMUGISHA JOAN",stdno:"2300039493",award:"MSCHT",status:"verified",uploaded_on:"2023-03-04"},{id:4,name:"JOHNDOE",stdno:"2002020983",award:"MISRET",status:"not_verified",uploaded_on:"2023-03-04"}],skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:!1,pagingData:{pageIndex:n,pageSize:s,sort:i,query:o,total:c},onPaginationChange:function(t){var r=_()(l);r.pageIndex=t,e(ce(r))},onSelectChange:function(t){var r=_()(l);r.pageSize=Number(t),r.pageIndex=1,e(ce(r))},onSort:function(t){var r=_()(l);r.sort=t,e(ce(r))}}),(0,g.jsx)(W,{})]})}},821:function(e,t,r){var n=r(6050),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},6050:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},8573:function(e,t,r){var n=r(8092),a=r(72),s=r(2582),i=Math.max,o=Math.min;e.exports=function(e,t,r){var c,u,l,d,f,p,m=0,h=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var r=c,n=u;return c=u=void 0,m=t,d=e.apply(n,r)}function j(e){return m=e,f=setTimeout(b,t),h?x(e):d}function w(e){var r=e-p;return void 0===p||r>=t||r<0||g&&e-m>=l}function b(){var e=a();if(w(e))return y(e);f=setTimeout(b,function(e){var r=t-(e-p);return g?o(r,l-(e-m)):r}(e))}function y(e){return f=void 0,v&&c?x(e):(c=u=void 0,d)}function Z(){var e=a(),r=w(e);if(c=arguments,u=this,p=e,r){if(void 0===f)return j(p);if(g)return clearTimeout(f),f=setTimeout(b,t),x(p)}return void 0===f&&(f=setTimeout(b,t)),d}return t=s(t)||0,n(r)&&(h=!!r.leading,l=(g="maxWait"in r)?i(s(r.maxWait)||0,t):l,v="trailing"in r?!!r.trailing:v),Z.cancel=function(){void 0!==f&&clearTimeout(f),m=0,c=p=u=f=void 0},Z.flush=function(){return void 0===f?d:y(a())},Z}},72:function(e,t,r){var n=r(7009);e.exports=function(){return n.Date.now()}},2582:function(e,t,r){var n=r(821),a=r(8092),s=r(152),i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=o.test(e);return r||c.test(e)?u(e.slice(2),r?2:8):i.test(e)?NaN:+e}}}]);
//# sourceMappingURL=56.e37e4f6c.chunk.js.map